name: Merge Request

on:
  push:
    branches:
      - request

jobs:
  merge-request:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Check for new text files
      run: |
        changed_files=$(git diff --name-only ${{ github.event.before }} ${{ github.sha }})

        for file in $changed_files; do
          if [[ $file == *.txt ]]; then
            echo "New text file found: $file"
            echo "Merging request branch into main branch"
            
            # Assuming your main branch is 'main', change it if necessary
            git checkout main
            git merge request --no-ff --no-edit
            git push origin main
            
            echo "Merge complete"
          fi
        done

